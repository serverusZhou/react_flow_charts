module.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t){e.exports=require("babel-runtime/core-js/object/keys")},function(e,t){e.exports=require("babel-runtime/core-js/object/assign")},function(e,t){e.exports=require("babel-runtime/helpers/extends")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return e&&e.__esModule?e:{default:e}}(n(0));t.default={keysSwith:function(e){return{getCurrentMode:function(){return(0,i.default)(e).find(function(t){return e[t]})},is:function(t){return e[t]},setTo:function(t){(0,i.default)(e).forEach(function(t){e[t]=!1}),e[t]=!0}}},clearObj:function(e){(0,i.default)(e).forEach(function(t){delete e[t]})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return e&&e.__esModule?e:{default:e}}(n(5));t.default=i.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=y(n(0)),o=y(n(1)),s=y(n(2)),r=y(n(6)),a=y(n(7)),l=y(n(8)),u=y(n(9)),c=y(n(10)),f=n(11),d=y(f),h=y(n(12)),p=y(n(17)),m=y(n(3)),b=y(n(18));function y(e){return e&&e.__esModule?e:{default:e}}var v=m.default.keysSwith({assembly:!0,line:!1,inLineChoosen:!1}),g={mode:v,ctx:null,dom:{canvas:{}},assemblies:[],choosenAssembly:{},ableMoveAssembly:{},lines:[],choosenLine:{},activeLine:{},temLine:{},material:{assemblies:{},lines:{}}},w=(0,p.default)(g),x=(0,b.default)(g),A=function(e){function t(e){(0,a.default)(this,t);var n=(0,u.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return n.state=(0,s.default)({},e),g.material.assemblies=e.assemblies,g.material.lines=e.lines,n}return(0,c.default)(t,e),(0,l.default)(t,[{key:"dragAssembly",value:function(e){e.dataTransfer.setData("assembly",e.target.id)}},{key:"materialDrop",value:function(e){var t=x.transPixelToPos({x:e.clientX,y:e.clientY});x.addAssmbly(e.dataTransfer.getData("assembly"),t)}},{key:"chooseAssembly",value:function(e,t){var n=g.mode,i=g.choosenLine,s=g.choosenAssembly,r=x.transPixelToPos({x:e.clientX,y:e.clientY});if(!n.is("line")){if(n.setTo("assembly"),m.default.clearObj(i),m.default.clearObj(s),x.chooseLine(r))return void n.setTo("inLineChoosen");var a=x.chooseAssmbly(r);t&&a&&t((0,o.default)({},a),function(e){x.updateChoosenAssemblyActuralData(e)})}}},{key:"moveStart",value:function(e){var t=g.mode,n=x.transPixelToPos({x:e.clientX,y:e.clientY});t.is("assembly")&&x.addAbleMoveAssembly(n),t.is("line")&&x.addTemLine(n)}},{key:"moveEnd",value:function(e){var t=g.mode,n=g.ableMoveAssembly,o=g.temLine;if(t.is("assembly")&&m.default.clearObj(n),t.is("line")){var s=x.transPixelToPos({x:e.clientX,y:e.clientY}),r=x.findAssmblyByPosition(s);r&&(0,i.default)(r).length&&x.addLine(r),m.default.clearObj(o)}}},{key:"move",value:function(e){var t=g.mode,n=g.ableMoveAssembly,o=g.temLine,s=x.transPixelToPos({x:e.clientX,y:e.clientY});t.is("assembly")&&(0,i.default)(n).length&&x.updateAssemblyPosition(s),t.is("line")&&(0,i.default)(o).length&&x.moveTemLine(s)}},{key:"setActiveLine",value:function(e,t,n){n[t].isActive||(0,i.default)(n).forEach(function(e){n[e].isActive=!1}),n[t].isActive=!n[t].isActive,this.setState({lines:n}),x.setActiveLine(e.target.id)}},{key:"narrowAssembly",value:function(){v.is("assembly")&&x.narrowAssembly()}},{key:"enlargeAssembly",value:function(){v.is("assembly")&&x.enlargeAssembly()}},{key:"deleteAssemblyOrLine",value:function(){console.log(v.getCurrentMode()),v.is("assembly")&&x.deleteAssembly(),v.is("inLineChoosen")&&x.deleteLine()}},{key:"render",value:function(){var e=this,t=this.state,n=t.typeSummary,o=t.assemblies,s=t.lines;return d.default.createElement("div",{className:h.default["flow-content"],ref:"flow_content"},d.default.createElement("div",{className:h.default.left_side},(0,i.default)(n).map(function(t){return d.default.createElement("div",{key:t},d.default.createElement("p",null,n[t]),d.default.createElement("div",null,(0,i.default)(o).map(function(n,i){return o[n].typeBelong===t?d.default.createElement("div",{key:i},d.default.createElement("img",{alt:o[n].assemblyName,className:h.default["assembly-img"],src:o[n].imageUrl,id:n,draggable:!0,onDragStart:function(t){return e.dragAssembly(t)},onMouseEnter:function(){o[n].showTip=!0,e.setState({assemblies:o})},onMouseLeave:function(){o[n].showTip=!1,e.setState({assemblies:o})}}),d.default.createElement("div",{className:o[n].showTip?h.default.show:h.default.hide},d.default.createElement("p",null,o[n].assemblyName),d.default.createElement("img",{src:o[n].imageUrl}))):""})))}),d.default.createElement("div",null,d.default.createElement("p",null,"线条（点击选中进行连线）"),d.default.createElement("div",null,(0,i.default)(s).map(function(t,n){return d.default.createElement("div",{key:n},d.default.createElement("img",{className:s[t].isActive?h.default["line-img-active"]:h.default["line-img"],src:s[t].imgSrc,id:t,draggable:!1,onClick:function(n){return e.setActiveLine(n,t,s)},onMouseEnter:function(){s[t].showTip=!0,e.setState({lines:s})},onMouseLeave:function(){s[t].showTip=!1,e.setState({lines:s})}}),d.default.createElement("div",{className:s[t].showTip?h.default.show:h.default.hide},d.default.createElement("p",null,s[t].lineName),d.default.createElement("img",{src:s[t].imgSrc})))})))),d.default.createElement("div",{className:h.default.content,onDrop:function(t){return e.materialDrop(t)},onDragOver:function(e){return e.preventDefault()}},d.default.createElement("canvas",{ref:"flow_canvas",onClick:function(t){return e.chooseAssembly(t,e.props.chooseAssembly)},onMouseDown:function(t){return e.moveStart(t)},onMouseUp:function(t){return e.moveEnd(t)},onMouseOut:function(t){return e.moveEnd(t)},onMouseMove:function(t){return e.move(t)}})),d.default.createElement("div",{className:h.default["action-field"]},d.default.createElement("button",{onClick:this.narrowAssembly},"Narrow"),d.default.createElement("button",{onClick:this.enlargeAssembly},"Enlarge"),d.default.createElement("button",{onClick:this.deleteAssemblyOrLine},"Delete")))}},{key:"componentDidMount",value:function(){g.dom.content=this.refs.flow_content,g.dom.canvas=this.refs.flow_canvas,w.init()}}]),t}(f.Component);t.default=A},function(e,t){e.exports=require("babel-runtime/core-js/object/get-prototype-of")},function(e,t){e.exports=require("babel-runtime/helpers/classCallCheck")},function(e,t){e.exports=require("babel-runtime/helpers/createClass")},function(e,t){e.exports=require("babel-runtime/helpers/possibleConstructorReturn")},function(e,t){e.exports=require("babel-runtime/helpers/inherits")},function(e,t){e.exports=require("react")},function(e,t,n){var i=n(13);"string"==typeof i&&(i=[[e.i,i,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(15)(i,o);i.locals&&(e.exports=i.locals)},function(e,t,n){(t=e.exports=n(14)(!1)).push([e.i,"* {\n  padding: 0;\n  margin: 0;\n}\n._309w2ibnpbg7ZxJ8qhBGa6 {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  position: relative;\n}\n._123YdiRNBAEdK1-ViZwQM {\n  width: 180px;\n  border: 2px dotted #d9dadc;\n  border-right: none;\n  border-radius: 3px;\n  padding: 0 10px;\n}\n._123YdiRNBAEdK1-ViZwQM > div {\n  width: 94%;\n  border-bottom: 1px solid #e7e7eb;\n}\n._123YdiRNBAEdK1-ViZwQM > div > p {\n  font-size: 14px;\n  padding: 10px 0 5px;\n}\n._123YdiRNBAEdK1-ViZwQM > div > div {\n  display: flex;\n  flex-wrap: wrap;\n  border: none;\n}\n._123YdiRNBAEdK1-ViZwQM > div > div > div {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n  width: 30%;\n  height: 30%;\n  border-radius: 3px;\n  margin: 5px 1.5%;\n}\n._123YdiRNBAEdK1-ViZwQM > div > div > div > img {\n  width: 30px;\n  height: 30px;\n}\n._123YdiRNBAEdK1-ViZwQM > div > div > div > div {\n  width: 120px;\n  padding: 10px;\n  position: absolute;\n  border: 1px #f0f0f0 solid;\n  border-radius: 5px;\n  top: 100%;\n  left: 50%;\n  background-color: #fff;\n  z-index: 1001;\n  text-align: center;\n}\n._123YdiRNBAEdK1-ViZwQM > div > div > div > div > img {\n  width: 80%;\n}\n._123YdiRNBAEdK1-ViZwQM > div > div > div > div > p {\n  text-align: center;\n}\n._2MXiZnF-10HmlSRDujFyZw {\n  cursor: pointer;\n}\n._2MXiZnF-10HmlSRDujFyZw:hover {\n  box-shadow: #ccc 0 0 5px;\n}\n._2yjsa-unOfzSTPCUM9h06F:hover {\n  background-color: rgba(216, 212, 212, 0.3);\n}\n._3-icZ6PZ7Rl-XOm99LX52x {\n  background-color: rgba(0, 0, 0, 0.3);\n}\n.Ta5ZvPKCEir2vVLbIJ_LU {\n  width: calc(100% - 201px);\n  border: 1px solid #e7e7eb;\n}\n.Ta5ZvPKCEir2vVLbIJ_LU canvas {\n  width: 100%;\n  height: 100%;\n}\n._3bGE-Y1fPC8AYGYGl-7Os8 {\n  display: block;\n}\n._1XcGL9vx8kp7bCVKDeR1fS {\n  display: none;\n}\n.iZZjWi4a93RT0k6r6Cd-p {\n  position: absolute;\n  z-index: 11;\n  right: 0;\n  top: 0;\n}\n.iZZjWi4a93RT0k6r6Cd-p button {\n  display: block;\n  width: 80px;\n  height: 35px;\n  border-radius: 3px;\n  margin: 8px;\n  background-color: green;\n  color: #fff;\n}\n.iZZjWi4a93RT0k6r6Cd-p button:hover {\n  background-color: #538d10;\n}\n",""]),t.locals={"flow-content":"_309w2ibnpbg7ZxJ8qhBGa6",left_side:"_123YdiRNBAEdK1-ViZwQM","assembly-img":"_2MXiZnF-10HmlSRDujFyZw","line-img":"_2yjsa-unOfzSTPCUM9h06F","line-img-active":"_3-icZ6PZ7Rl-XOm99LX52x",content:"Ta5ZvPKCEir2vVLbIJ_LU",show:"_3bGE-Y1fPC8AYGYGl-7Os8",hide:"_1XcGL9vx8kp7bCVKDeR1fS","action-field":"iZZjWi4a93RT0k6r6Cd-p"}},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=function(e,t){var n=e[1]||"",i=e[3];if(!i)return n;if(t&&"function"==typeof btoa){var o=function(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}(i),s=i.sources.map(function(e){return"/*# sourceURL="+i.sourceRoot+e+" */"});return[n].concat(s).concat([o]).join("\n")}return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var i={},o=0;o<this.length;o++){var s=this[o][0];"number"==typeof s&&(i[s]=!0)}for(o=0;o<e.length;o++){var r=e[o];"number"==typeof r[0]&&i[r[0]]||(n&&!r[2]?r[2]=n:n&&(r[2]="("+r[2]+") and ("+n+")"),t.push(r))}},t}},function(e,t,n){var i={},o=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}}(function(){return window&&document&&document.all&&!window.atob}),s=function(e){var t={};return function(e){if("function"==typeof e)return e();if(void 0===t[e]){var n=function(e){return document.querySelector(e)}.call(this,e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}}(),r=null,a=0,l=[],u=n(16);function c(e,t){for(var n=0;n<e.length;n++){var o=e[n],s=i[o.id];if(s){s.refs++;for(var r=0;r<s.parts.length;r++)s.parts[r](o.parts[r]);for(;r<o.parts.length;r++)s.parts.push(b(o.parts[r],t))}else{var a=[];for(r=0;r<o.parts.length;r++)a.push(b(o.parts[r],t));i[o.id]={id:o.id,refs:1,parts:a}}}}function f(e,t){for(var n=[],i={},o=0;o<e.length;o++){var s=e[o],r=t.base?s[0]+t.base:s[0],a={css:s[1],media:s[2],sourceMap:s[3]};i[r]?i[r].parts.push(a):n.push(i[r]={id:r,parts:[a]})}return n}function d(e,t){var n=s(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var i=l[l.length-1];if("top"===e.insertAt)i?i.nextSibling?n.insertBefore(t,i.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),l.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var o=s(e.insertInto+" "+e.insertAt.before);n.insertBefore(t,o)}}function h(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=l.indexOf(e);t>=0&&l.splice(t,1)}function p(e){var t=document.createElement("style");return void 0===e.attrs.type&&(e.attrs.type="text/css"),m(t,e.attrs),d(e,t),t}function m(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function b(e,t){var n,i,o,s;if(t.transform&&e.css){if(!(s=t.transform(e.css)))return function(){};e.css=s}if(t.singleton){var l=a++;n=r||(r=p(t)),i=v.bind(null,n,l,!1),o=v.bind(null,n,l,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",m(t,e.attrs),d(e,t),t}(t),i=function(e,t,n){var i=n.css,o=n.sourceMap,s=void 0===t.convertToAbsoluteUrls&&o;(t.convertToAbsoluteUrls||s)&&(i=u(i));o&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var r=new Blob([i],{type:"text/css"}),a=e.href;e.href=URL.createObjectURL(r),a&&URL.revokeObjectURL(a)}.bind(null,n,t),o=function(){h(n),n.href&&URL.revokeObjectURL(n.href)}):(n=p(t),i=function(e,t){var n=t.css,i=t.media;i&&e.setAttribute("media",i);if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),o=function(){h(n)});return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else o()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=o()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=f(e,t);return c(n,t),function(e){for(var o=[],s=0;s<n.length;s++){var r=n[s];(a=i[r.id]).refs--,o.push(a)}e&&c(f(e,t),t);for(s=0;s<o.length;s++){var a;if(0===(a=o[s]).refs){for(var l=0;l<a.parts.length;l++)a.parts[l]();delete i[a.id]}}}};var y=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}();function v(e,t,n,i){var o=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=y(t,o);else{var s=document.createTextNode(o),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(s,r[t]):e.appendChild(s)}}},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,i=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var o,s=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(s)?e:(o=0===s.indexOf("//")?s:0===s.indexOf("/")?n+s:i+s.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return e&&e.__esModule?e:{default:e}}(n(0));t.default=function(e){return{init:function(){var t=this,n=e.dom.canvas;n.width=1e3,n.height=1e3*n.offsetHeight/n.offsetWidth,e.ctx=n.getContext("2d"),function i(){e.ctx.clearRect(0,0,n.width,n.height),t.draw(),requestAnimationFrame(i)}()},draw:function(){var t=e.assemblies,n=e.choosenAssembly,o=e.choosenLine,s=e.ctx,r=e.lines,a=e.temLine;t.forEach(function(e){if(e.draw(s,e.position,e.size,e.imageUrl),n[e.id]){var t=e.position,i=e.size;s.beginPath(),s.lineWidth=1,s.fillStyle="rgba(0,0,0,.3)",s.moveTo(t.x,t.y),s.lineTo(t.x+i.width,t.y),s.lineTo(t.x+i.width,t.y+i.height),s.lineTo(t.x,t.y+i.height),s.lineTo(t.x,t.y),s.fill(),s.closePath()}}),r.forEach(function(e){e.draw(s,e.from.position,e.to.position,e.from.assembly.size,e.to.assembly.size),o[e.id]&&(s.beginPath(),s.lineWidth=1,s.strokeStyle="rgba(0,0,0,.3)",s.moveTo(e.from.position.x,e.from.position.y),s.lineTo(e.to.position.x,e.to.position.y),s.stroke(),s.closePath())}),(0,i.default)(a).length&&a.draw(s,a.from.position,a.to.position)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=u(n(2)),o=u(n(1)),s=u(n(0));t.default=function(e){return{transPixelToPos:function(t){var n=e.dom;return{x:(t.x-n.content.offsetLeft-n.canvas.offsetLeft)/n.canvas.width*1e3,y:(t.y-n.content.offsetTop-n.canvas.offsetTop)/n.canvas.width*1e3}},addAssmbly:function(t,n){var i=e.assemblies,o=e.material;i.push({id:(0,r.default)(),assemblyName:t,imageUrl:o.assemblies[t].imageUrl,position:{x:n.x-(o.assemblies[t].size&&o.assemblies[t].size.width||100)/2,y:n.y-(o.assemblies[t].size&&o.assemblies[t].size.height||100)/2},size:{width:o.assemblies[t].size&&o.assemblies[t].size.width||100,height:o.assemblies[t].size&&o.assemblies[t].size.height||100},lines:{from:[],to:[]},draw:o.assemblies[t].draw?o.assemblies[t].draw():function(e,t,n,i){(0,l.drawAImage)(e,i,t,n)},acturalData:{}})},chooseAssmbly:function(t){var n=e.assemblies,i=e.choosenAssembly;a.default.clearObj(i);var o=null;return n.forEach(function(e){c(t,{x:e.position.x,endX:e.position.x+e.size.width,y:e.position.y,endY:e.position.y+e.size.height})&&(i[e.id]=!0,o=e)}),o},chooseLine:function(t){var n=e.lines,i=e.choosenLine;a.default.clearObj(i);var o=null;return n.forEach(function(e){console.log("sizesize",e),function(e,t,n,i,o){var s=Math.sqrt(Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2)),r=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),a=Math.asin((n.y-t.y)/s),l=Math.asin((e.y-t.y)/r),u={x:s,y:0},c={x:r*Math.cos(a-l),y:r*Math.sin(a-l)},f=s/20>10?s/20:10;return Math.abs(c.y)<f&&c.x<u.x-Math.sqrt(Math.pow(o.width,2)+Math.pow(o.height,2))/2&&c.x>Math.sqrt(Math.pow(i.width,2)+Math.pow(i.height,2))/2}(t,e.from.position,e.to.position,e.from.assembly.size,e.to.assembly.size)&&(i[e.id]=!0,o=e,console.log("linelineline",e))}),o},updateChoosenAssemblyActuralData:function(t){var n=e.assemblies,i=e.choosenAssembly;n.forEach(function(e){i[e.id]&&(e.acturalData=t)})},findAssmblyByPosition:function(t){return e.assemblies.find(function(e){return c(t,{x:e.position.x,endX:e.position.x+e.size.width,y:e.position.y,endY:e.position.y+e.size.height})})},addAbleMoveAssembly:function(t){var n=e.assemblies,i=e.ableMoveAssembly;a.default.clearObj(i),n.forEach(function(e){c(t,{x:e.position.x,endX:e.position.x+e.size.width,y:e.position.y,endY:e.position.y+e.size.height})&&(i[e.id]=!0)})},updateAssemblyPosition:function(t){var n=e.assemblies,i=e.ableMoveAssembly;n.forEach(function(e){i[e.id]&&(e.position={x:t.x-e.size.width/2,y:t.y-e.size.height/2},e.lines.from.forEach(function(e){e.line.from.position.x=t.x,e.line.from.position.y=t.y}),e.lines.to.forEach(function(e){e.line.to.position.x=t.x,e.line.to.position.y=t.y}))})},setActiveLine:function(t){var n=e.mode,i=e.activeLine;i[t]?(n.setTo("assembly"),a.default.clearObj(i)):(n.setTo("line"),a.default.clearObj(i),i[t]=!0)},addTemLine:function(t){var n=this.findAssmblyByPosition(t);if(n&&(0,s.default)(n).length){var i=e.temLine,o=e.material,a=e.activeLine;i.id=(0,r.default)(),i.type=(0,s.default)(a)[0],i.from={assembly:n,position:{x:n.position.x+n.size.width/2,y:n.position.y+n.size.height/2}},i.to={assembly:null,position:{x:n.position.x+n.size.width/2,y:n.position.y+n.size.height/2}},i.draw=o.lines[(0,s.default)(a)[0]].draw()}},addLine:function(t){var n=e.temLine,i=e.lines;n.to.position={x:t.position.x+t.size.width/2,y:t.position.y+t.size.height/2},n.to.assembly=t;var s=(0,o.default)({},n);n.from.assembly.lines.from.push({id:n.id,line:s}),n.to.assembly.lines.to.push({id:n.id,line:s}),i.push(s)},moveTemLine:function(t){e.temLine.to.position=(0,i.default)({},t)},narrowAssembly:function(){var t=e.choosenAssembly,n=e.assemblies;t&&(0,s.default)(t).length&&n.forEach(function(e){t[e.id]&&(e.size.width=e.size.width/1.1,e.size.height=e.size.height/1.1)})},enlargeAssembly:function(){var t=e.choosenAssembly,n=e.assemblies;t&&(0,s.default)(t).length&&n.forEach(function(e){t[e.id]&&(e.size.width=1.1*e.size.width,e.size.height=1.1*e.size.height)})},deleteAssembly:function(){var t=e.choosenAssembly,n=e.assemblies,i=e.lines;t&&(0,s.default)(t).length&&n.forEach(function(o,s){t[o.id]&&(e.lines=i.filter(function(e){return!o.lines.from.some(function(t){return e.id===t.id})&&!o.lines.to.some(function(t){return e.id===t.id})}),n.splice(s,1))})},deleteLine:function(){var t=e.choosenLine,n=e.lines,i=e.mode;t&&(0,s.default)(t).length&&n.forEach(function(e,i){t[e.id]&&(e.from.assembly.lines.from.forEach(function(t,n){e.id===t.id&&e.from.assembly.lines.from.splice(n,1)}),e.to.assembly.lines.to.forEach(function(t,n){e.id===t.id&&e.to.assembly.lines.to.splice(n,1)}),n.splice(i,1))}),a.default.clearObj(t),i.setTo("assembly")}}};var r=u(n(19)),a=u(n(3)),l=n(20);function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){return e.x>t.x&&e.x<t.endX&&e.y>t.y&&e.y<t.endY}},function(e,t){e.exports=require("uuid")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return e&&e.__esModule?e:{default:e}}(n(21));t.drawChooseWapper=function(e,t,n){e.beginPath(),e.lineWidth="4",e.strokeStyle="green",e.rect(t.x,t.y,n.width,n.height),e.stroke(),e.closePath()},t.drawHoverWapper=function(e,t,n){e.beginPath(),e.lineWidth="4",e.strokeStyle="rgba(0,0,0,.2)",e.rect(t.x,t.y,n.width,n.height),e.stroke(),e.closePath()},t.drawALine=function(e,t,n,o){t.beginPath(),t.lineWidth=3,t.fillStyle="blue";var s=o[0]-n[0],r=o[1]-n[1],a=Math.sqrt(Math.pow(s,2)+Math.pow(r,2)),l=6*r/a*(e.width/e.height),u=6*s/a*(e.width/e.height),c=[n[0]-l,n[1]+u],f=[n[0]+l,n[1]-u],d=[o[0]-.2*s+l,o[1]-.2*r-u],h=[o[0]-.2*s-l,o[1]-.2*r+u],p=[o[0]-.2*s+2*l,o[1]-.2*r-2*u],m=[o[0]-.2*s-2*l,o[1]-.2*r+2*u];t.moveTo.apply(t,c),t.lineTo.apply(t,f),t.lineTo.apply(t,d),t.lineTo.apply(t,p),t.lineTo.apply(t,(0,i.default)(o)),t.lineTo.apply(t,m),t.lineTo.apply(t,h),t.lineTo.apply(t,c),t.fill(),t.closePath()},t.drawAPipeWapper=function(){var e=1;return function(t,n,i,o){n.beginPath(),n.strokeStyle="#fff",n.lineWidth=3;var s=o[0]-i[0],r=o[1]-i[1],a=Math.sqrt(Math.pow(s,2)+Math.pow(r,2)),l=6*r/a*(t.width/t.height),u=6*s/a*(t.width/t.height),c=[i[0]-l,i[1]+u],f=[i[0]+l,i[1]-u],d=[o[0]+l,o[1]-u],h=[o[0]-l,o[1]+u];n.moveTo.apply(n,c),n.lineTo.apply(n,f),n.lineTo.apply(n,d),n.lineTo.apply(n,h),n.lineTo.apply(n,c),n.stroke(),n.closePath(),e<30?e+=.5:e=1;var p=e*s/a,m=e*r/a;n.beginPath(),n.fillStyle="#ccc";for(var b=1;b<a/30;b++)n.moveTo(i[0]-l+p+30*b*s/a,i[1]+u+m+30*b*r/a),n.lineTo(i[0]+l+p+30*b*s/a,i[1]-u+m+30*b*r/a),n.lineTo(i[0]+p+20*s/a+30*b*s/a,i[1]+m+20*r/a+30*b*r/a),n.lineTo(i[0]+p+20*s/a+30*b*s/a,i[1]+m+20*r/a+30*b*r/a),n.lineTo(i[0]-l+p+30*b*s/a,i[1]+u+m+30*b*r/a);n.fill(),n.closePath()}},t.drawAImage=function(e,t,n,i){e.beginPath();var o=new Image;o.src=t,e.drawImage(o,0,0,o.width,o.height,n.x,n.y,i.width,i.height),e.closePath()}},function(e,t){e.exports=require("babel-runtime/helpers/toConsumableArray")}]);